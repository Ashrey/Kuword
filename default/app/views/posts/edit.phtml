{%extends  'admin.phtml' %}
{%block content %}
{%exec Flash::content %}
    <div class="row">
        <div class="col-10 offset-1">
            {%exec Form::open%}
            <fieldset><legend>{%trans _('Posts')%}</legend>
            <div class="control-group">
				<label for="posts_title" class="control">{%trans _('Title')%}</label>
				<div class="controls">{%exec Form::text 'posts.title' 'class="control"' %}</div>
			</div>
			<div class="control-group">
				<label for="posts_content" class="control">{%trans _('Text')%}</label>
                <div class="row">
				<div class="col-6 entry-markdown-content">
                {%exec Form::textarea 'posts.content' 'class="control entry-markdown"' %}</div>
                <div class="col-6" id="rendered-markdown"></div>
                </div>
			</div>

			<div class="control-group">
				<label for="posts_content" class="control-label">{%trans _('Type Publish')%}</label>
				<div class="controls">{%exec Form::dbSelect 'posts.post_type_id' %}</div>
			</div>
            </fieldset>
            {%inline '_partial/submit.phtml'%}
            {%exec Form::close%}
        </div>
    </div>
{%endblock%}
{% block jsblock%}
    {%js 'zepto.min' %}
    {%js 'marked'%}
<script type="text/javascript">
    $(function(){
        var editor = $('#posts_content'), render = $('#rendered-markdown');
        editor.on('keypress', function(e){
                var text = editor.val();
                render.html(marked(text));
        });
    });
</script>
{%endblock%}

